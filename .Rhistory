scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(f09_01), !is.na(f09_02), !is.na(f09_03),
tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 'Norte',
region_cod %in% c(5:8, 16) ~ 'Centro',
region_cod %in% c(9:12, 14) ~ 'Sur',
region_cod == 13 ~ 'Metropolitana'))) %>%
prop_list(f09_01 %in% 4:5, f09_02 %in% 4:5, f09_03 %in% 4:5,
by = c(ola, voto_salida, zona), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
mutate(name = factor(name,
levels = glue::glue('f09_0{1:3} %in% 4:5'),
labels = c('Promover enseñanza de\nMapudungun en escuelas',
'Reforzar politica de restitución\nde tierras a Mapuches',
'Cupos reservados en el\ncongreso para el pueblo mapuche'))) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
facet_wrap(~zona) +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(f09_01), !is.na(f09_02), !is.na(f09_03),
tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(f09_01 %in% 4:5, f09_02 %in% 4:5, f09_03 %in% 4:5,
by = c(ola, voto_salida, zona), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
mutate(name = factor(name,
levels = glue::glue('f09_0{1:3} %in% 4:5'),
labels = c('Promover enseñanza de\nMapudungun en escuelas',
'Reforzar politica de restitución\nde tierras a Mapuches',
'Cupos reservados en el\ncongreso para el pueblo mapuche'))) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
facet_wrap(~zona) +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(f09_01), !is.na(f09_02), !is.na(f09_03),
tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(f09_01 %in% 4:5, f09_02 %in% 4:5, f09_03 %in% 4:5,
by = c(ola, voto_salida, zona), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo'),
zona == 'Sur') %>%
mutate(name = factor(name,
levels = glue::glue('f09_0{1:3} %in% 4:5'),
labels = c('Promover enseñanza de\nMapudungun en escuelas',
'Reforzar politica de restitución\nde tierras a Mapuches',
'Cupos reservados en el\ncongreso para el pueblo mapuche'))) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(f09_01), !is.na(f09_02), !is.na(f09_03),
tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(f09_01 %in% 4:5, f09_02 %in% 4:5, f09_03 %in% 4:5,
by = c(ola, voto_salida, zona), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo'),
zona == 'Sur') %>%
mutate(name = factor(name,
levels = glue::glue('f09_0{1:3} %in% 4:5'),
labels = c('Promover enseñanza de\nMapudungun en escuelas',
'Reforzar politica de restitución\nde tierras a Mapuches',
'Cupos reservados en el\ncongreso para el pueblo mapuche'))) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022) en la zona Sur, \nsegún voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(f09_01), !is.na(f09_02), !is.na(f09_03),
tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(f09_01 %in% 4:5, f09_02 %in% 4:5, f09_03 %in% 4:5,
by = c(ola, voto_salida, zona), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo'),
zona == 'Sur') %>%
mutate(name = factor(name,
levels = glue::glue('f09_0{1:3} %in% 4:5'),
labels = c('Promover enseñanza de\nMapudungun en escuelas',
'Reforzar politica de restitución\nde tierras a Mapuches',
'Cupos reservados en el\ncongreso para el pueblo mapuche'))) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022) en la zona Sur, según voto en\nplebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
sjmisc::frq(elsoc_long_2016_2022$c46_05)
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros"))) %>%
prop_list(c46_05 %in% 4:5, by = c(ola, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = name, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros"))) %>%
prop_list(c46_05 %in% 4:5, by = c(ola, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = ola, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(c46_05 %in% 4:5, by = c(zona, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = zona, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('Acuerdo con medidas de reparación (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo con:')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(c46_05 %in% 4:5, by = c(zona, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = zona, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('"La nueva constitución permitirá una mejor relación entre el Estado y los pueblos indígenas en Chile" (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(c46_05 %in% 4:5, by = c(zona, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = zona, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('"La nueva constitución permitirá una mejor relación entre el Estado y los pueblos\nindígenas en Chile" (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(c46_05 %in% 4:5, by = c(zona, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, fill = zona, x = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('"La nueva constitución permitirá una mejor relación entre el Estado y los pueblos\nindígenas en Chile" (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo')
elsoc_long_2016_2022 %>%
left_join(voto_salida, by = 'idencuesta') %>%
sjlabelled::as_label(ola) %>%
filter(!is.na(c46_05), tipo_atricion %in% c(1, 33)) %>%
mutate(voto_salida = factor(car::recode(voto_salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
zona = factor(case_when(region_cod %in% c(1:4, 15) ~ 1,
region_cod %in% c(5:8, 16) ~ 2,
region_cod %in% c(9:12, 14) ~ 3,
region_cod == 13 ~ 4),
levels = 1:4,
labels = c('Norte', 'Centro', 'Sur', 'Metropolitana'))) %>%
prop_list(c46_05 %in% 4:5, by = c(zona, voto_salida), na.rm = T)  %>%
filter(!is.na(voto_salida), voto_salida %in% c('Apruebo', 'Rechazo')) %>%
ggplot(aes(y = prop, x = zona, fill = voto_salida,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent,
limits = c(0, 1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .66, direction = 1, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle('"La nueva constitución permitirá una mejor relación entre el Estado y los pueblos\nindígenas en Chile" (2022), según voto en plebiscito de salida',
subtitle = 'Porcentaje de Acuerdo o Muy de acuerdo')
library(knitr)
library(tidyverse)
library(sjmisc)
library(sjlabelled)
library(ggrepel)
library(ggalluvial)
library(survey)
library(elsoc)
library(lubridate)
library(viridis)
library(statar)
load(file.path('..', 'inputs', 'ELSOC_Long_2016_2022_v1.00_R.RData'))
load(file.path('..', 'inputs', 'ELSOC_Wide_2016_2022_v1.00_R.RData'))
# Voto en plebiscito de salida para agregar a toda la muestra:
voto_salida <- elsoc_long_2016_2022 %>%
filter(ola == 6) %>%
mutate(voto_salida = case_when(c55 == 4 ~ 5,
c55 %in% 1:3 ~ c55,
c55 %in% -666:-999 ~ 5,
c56 %in% -666:-999 ~ 5,
c56 == 2 ~ 4,
c57 %in% 1:3 ~ c57,
c57 %in% -666:-999 ~ 5
))  %>%
select(idencuesta, voto_salida)
# Cargar datos de perfiles:
load(file.path('..', 'inputs', 'perfiles.RData'))
perfiles0 <- perfiles
perfiles <- perfiles0 %>%
mutate(pp_3 = factor(pp_3,
levels = 1:3,
labels = c("1 (65.16%)", "2 (11.58%)", "3 (23.26%)"))) %>%
mutate(pp_4 = factor(pp_4,
levels = 1:4,
labels = c("Votante\nCrónico (64.24%)", "Desafecto (8.30%)", "No-Votante\nCrónico (14.28%)", "Activado (13.17%)"))) %>%
mutate(pp_5 = factor(pp_5,
levels = 1:5,
labels = c("1 (14.27%)", "2 (11.44%)", "3 (4.73%)",
"4 (6.33%)", "5 (63.24%)")))
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
mutate(pp_4 = factor(pp_4,
levels = 1:4,
labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer"))) %>%
prop(m0_sexo, by = pp_4, na.rm = TRUE)
elsoc_long_2016_2022 %>%
left_join(perfiles, by = 'idencuesta') %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
mutate(pp_4 = factor(pp_4,
levels = 1:4,
labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer"))) %>%
prop(m0_sexo, by = pp_4, na.rm = TRUE)
elsoc_long_2016_2022 %>%
left_join(perfiles, by = 'idencuesta') %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
# mutate(pp_4 = factor(pp_4,
#                      levels = 1:4,
#                      labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer"))) %>%
prop(m0_sexo, by = pp_4, na.rm = TRUE)
elsoc_long_2016_2022 %>%
left_join(perfiles, by = 'idencuesta') %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
# mutate(pp_4 = factor(pp_4,
#                      levels = 1:4,
#                      labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer"))) %>%
prop(m0_sexo, by = pp_4, na.rm = TRUE)
elsoc_long_2016_2022 %>%
left_join(perfiles, by = 'idencuesta') %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
mutate(pp_4 = factor(pp_4,
# levels = 1:4,
labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer"))) %>%
prop(m0_sexo, by = pp_4, na.rm = TRUE)
asd <- elsoc_long_2016_2022 %>%
left_join(perfiles, by = 'idencuesta') %>%
filter(tipo_atricion == 1 | tipo_atricion == 33 | ola == 6) %>%
filter(!is.na(m0_sexo), !is.na(pp_4)) %>%
mutate(pp_4 = factor(pp_4,
# levels = 1:4,
labels = c("Votante\nCrónico", "Desafecto", "No-Votante\nCrónico", "Activado"))) %>%
mutate(m0_sexo = factor(m0_sexo,
levels = 1:2,
labels = c("Hombre", "Mujer")))
attributes(elsoc_long_2016_2022$pp_4)
str(elsoc_long_2016_2022$pp_4)
str(asd$pp_4)
attributes(asd$pp_4)
