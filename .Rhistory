mutate(pleb = case_when(c55 == 4 ~ 5,
c55 == 1 ~ 1,
c55 == 2 ~ 2,
c55 == 3 ~ 3,
c55 == -999 ~ 5,
c55 == -888 ~ 5,
c55 == -777 ~ 5,
c55 == -666 ~ 5,
c56 == -999 ~ 5,
c56 == -888 ~ 5,
c56 == -777 ~ 5,
c56 == -666 ~ 5,
c56 == 2 ~ 4,
c57 == 1 ~ 1,
c57 == 2 ~ 2,
c57 == 3 ~ 3,
c57 == -999 ~ 5,
c57 == -888 ~ 5,
c57 == -777 ~ 5,
c57 == -666 ~ 5))  %>%
group_by(idencuesta) %>%
mutate(salida = ifelse(length(na.omit(pleb)) == 0, NA, max(pleb, na.rm = T))) %>%
ungroup()
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1 & ola ==5 & !is_nsnr(s01, s02, s03)) %>%
prop_list(s01 %in% 4:5, s02 %in% 4:5, s03 %in% 4:5, na.rm = TRUE) %>%
mutate(name = factor(name,
levels = c('s01 %in% 4:5', 's02 %in% 4:5', 's03 %in% 4:5'),
labels = c('Esta satisfecho o muy\nsatisfecho con su vida',
'Su vida se acerca o se acerca\ncompletamente a su ideal',
'Su salud es muy buena\no Excelente'))) %>%
ggplot(aes(y = prop, x = name, fill = name,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col() +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent, limits = c(0,1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .75, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'none') +
ggtitle(NULL, 'Porcentaje que responde que...') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022. Los números \n se omiten por confidencialidad')
# elsoc::load_elsoc('long')
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1 & !is_nsnr(s01, s02, s03)) %>%
sjlabelled::as_label(ola) %>%
prop_list(s01 %in% 4:5, s02 %in% 4:5, s03 %in% 4:5, by = ola, na.rm = TRUE) %>%
mutate(name = factor(name,
levels = c('s01 %in% 4:5', 's02 %in% 4:5', 's03 %in% 4:5'),
labels = c('Esta satisfecho o muy\nsatisfecho con su vida',
'Su vida se acerca o se acerca\ncompletamente a su ideal',
'Su salud es muy buena\no Excelente'))) %>%
ggplot(aes(y = prop, x = ola, group = name, color = name,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_point(size = 1.75) +
geom_line() +
geom_text_repel(nudge_y = .025, size = 3, color = 'black') +
scale_y_continuous(labels = scales::percent, limits = c(0,1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_color_viridis_d(end = .75, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle(NULL, 'Porcentaje que responde que...') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1, ola == 5) %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = factor(car::recode(phq9, "0:4 = 1; 5:9 = 2; 10:14 = 3; 15:27 = 4"),
levels = c(1,2,3,4),
labels = c('Sin sintomas o síntomas\nde depresión mínima',
'Síntomas de\ndepresion media',
'Síntomas de\ndepresion moderada',
'Síntomas de depresion\nmoderada-severa o severa'))) %>%
prop(depr, na.rm = TRUE) %>%
ggplot(aes(y = prop, x = depr, fill = depr,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'dodge2') +
scale_y_continuous(labels = scales::percent, limits = 0:1) +
ylab(label = NULL) +
xlab(label = NULL) +
ggtitle("Porcentaje que presenta síntomas depresivos ")+
scale_fill_viridis_d(begin = 0, end = .85, direction = -1) +
geom_text(position = position_dodge2(.9),
size = 3,
vjust = -.5) +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'none') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
# elsoc::load_elsoc('long')
elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = factor(car::recode(phq9, "0:4 = 1; 5:9 = 2; 10:14 = 3; 15:27 = 4"),
levels = c(1,2,3,4),
labels = c('Sin sintomas o síntomas\nde depresión mínima',
'Síntomas de\ndepresion media',
'Síntomas de\ndepresion moderada',
'Síntomas de depresion\nmoderada-severa\no severa')),
salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros"))) %>%
filter(ola == 6,!is.na(salida)) %>%
prop(depr, by = c(salida), na.rm = TRUE) %>%
sjlabelled::as_label(depr, salida) %>%
ggplot(aes(y = prop, x = salida, fill = fct_rev(depr),
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'Stack') +
scale_y_continuous(labels = scales::percent) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(begin = 0, end = .85, option = 'viridis') +
geom_text(position = position_stack(vjust = .5),
size = 3,
color = rep(rep(c('black', 'white'), each = 2), 3)) +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = TRUE)) +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
# elsoc::load_elsoc('long')
elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09)) %>%
dplyr::filter(tipo_atricion == 1) %>%
prop(phq9 >= 10 , by = c(ola, m0_sexo), na.rm = TRUE) %>%
sjlabelled::as_label(ola, m0_sexo) %>%
ggplot(aes(y = prop, x = ola, color = m0_sexo, group = m0_sexo,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_point(size = 1.75) +
geom_line() +
geom_text_repel(nudge_y = .025, size = 3, color = 'black') +
scale_y_continuous(labels = scales::percent, limits = 0:1) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_color_viridis_d(begin = .33, end = .66) +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
# elsoc::load_elsoc('long')
p = elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1, !is_nsnr(m02)) %>%
mutate(sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3)) %>%
sjlabelled::as_label(ola) %>%
prop_list(sit_laboral==1, sit_laboral==2, sit_laboral==3, by = ola, na.rm = TRUE) %>%
mutate(name = factor(name,
levels = c('sit_laboral == 1', 'sit_laboral == 2', 'sit_laboral == 3'),
labels = c('Ocupados',
'Desocupados',
'Inactivos'))) %>%
ggplot(aes(y = prop, x = ola, group = name, color = name,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_point(size = 1.75) +
geom_line() +
geom_text_repel(nudge_y = .025, size = 3, color = 'black') +
scale_y_continuous(labels = scales::percent, limits = c(0,1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_color_viridis_d(end = .75, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
ggtitle(NULL, 'Situación Laboral por Ola') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
p
# elsoc::load_elsoc('long')
p = elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3,
labels = c("Ocupados","Desocupados","Inactivos")),
ola = ifelse(ola==1,"2016",
ifelse(ola==6,"2022",ola))) %>%
filter(ola==2016|ola==2022,muestra==1,!is.na(salida),!is.na(sit_laboral)) %>%
prop(salida, by = c(ola,sit_laboral), na.rm = TRUE) %>%
sjlabelled::as_label(salida, sit_laboral) %>%
ggplot(aes(y = prop, x = sit_laboral, fill = fct_rev(salida),
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col(position = 'Stack')
p +
scale_y_continuous(labels = scales::percent) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(begin = 0, end = .85, option = 'viridis') +
geom_text(position = position_stack(vjust = .5),
size = 3) +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'top',
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = TRUE)) +
facet_grid(~ola) +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022.')
?facet_grid
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1 & ola ==5 & !is_nsnr(s01, s02, s03)) %>%
prop_list(s01 %in% 4:5, s02 %in% 4:5, s03 %in% 4:5, na.rm = TRUE) %>%
mutate(name = factor(name,
levels = c('s01 %in% 4:5', 's02 %in% 4:5', 's03 %in% 4:5'),
labels = c('Esta satisfecho o muy\nsatisfecho con su vida',
'Su vida se acerca o se acerca\ncompletamente a su ideal',
'Su salud es muy buena\no Excelente'))) %>%
ggplot(aes(y = prop, x = name, fill = name,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col() +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent, limits = c(0,1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .75, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'none') +
ggtitle(NULL, 'Porcentaje que responde que...') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022. Los números se omiten por confidencialidad')
elsoc_long_2016_2022 %>%
filter(tipo_atricion == 1 & ola ==5 & !is_nsnr(s01, s02, s03)) %>%
prop_list(s01 %in% 4:5, s02 %in% 4:5, s03 %in% 4:5, na.rm = TRUE) %>%
mutate(name = factor(name,
levels = c('s01 %in% 4:5', 's02 %in% 4:5', 's03 %in% 4:5'),
labels = c('Esta satisfecho o muy\nsatisfecho con su vida',
'Su vida se acerca o se acerca\ncompletamente a su ideal',
'Su salud es muy buena\no Excelente'))) %>%
ggplot(aes(y = prop, x = name, fill = name,
label = scales::percent(prop, accuracy = .1))) +
theme_bw() +
geom_col() +
geom_text(position = position_dodge(.9),
vjust = -.5, size = 3) +
scale_y_continuous(labels = scales::percent, limits = c(0,1)) +
ylab(label = NULL) +
xlab(label = NULL) +
scale_fill_viridis_d(end = .75, option = 'viridis') +
theme(plot.caption = element_text(hjust = 0),
legend.position = 'none') +
ggtitle(NULL, 'Porcentaje que responde que...') +
labs(caption = 'Fuente: Elaboración propia en base a datos ELSOC 2016-2022. Los números se omiten por confidencialidad.')
elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3,
labels = c("Ocupados","Desocupados","Inactivos")))%>%
filter(ola==2016|ola==2022,muestra==1,!is.na(salida),!is.na(sit_laboral))
elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3,
labels = c("Ocupados","Desocupados","Inactivos")))%>%
filter(ola==2016|ola==2022,muestra==1,!is.na(salida),!is.na(sit_laboral)) %>% lm(salida ~ sit_laboral)
data = elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3,
labels = c("Apruebo", "Rechazo", "Otros")),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3,
labels = c("Ocupados","Desocupados","Inactivos")))%>%
filter(ola==2016|ola==2022,muestra==1,!is.na(salida),!is.na(sit_laboral))
lm(salida ~ sit_laboral,data=data)
data = elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3))%>%
filter(ola==2016|ola==2022,muestra==1,!is.na(salida),!is.na(sit_laboral))
lm(salida ~ sit_laboral,data=data)
View(data)
data = elsoc_long_2016_2022 %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3))%>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
lm(salida ~ sit_laboral,data=data)
lm(salida ~ sit_laboral,data=data) %>% summary()
lm(salida ~ sit_laboral,data=data)
reg = lm(salida ~ sit_laboral,data=data)
reg %>% summary()
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo,data=data)
reg %>% summary()
reg %>% stargazer::stargazer()
?stargazer
reg %>% stargazer::stargazer(type = "html")
reg %>% stargazer::stargazer(type = "tex")
reg %>% stargazer::stargazer(type = "latex")
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo,data=data+ phq9)
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09))%>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo,data=data+ phq9)
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09)) %>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo + phq9,data=data)
reg %>% stargazer::stargazer(type = "latex")
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = ifelse(phq9>=10,1,0)) %>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo + depr,data=data)
reg %>% stargazer::stargazer(type = "latex")
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = 3"),
levels = 1:3),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = NA"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = ifelse(phq9>=10,1,0)) %>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo + depr,data=data)
reg %>% stargazer::stargazer(type = "latex")
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = NA"),
levels = 1:2),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = ifelse(phq9>=10,1,0)) %>%
filter(muestra==1,!is.na(salida),!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo + depr,data=data)
reg %>% stargazer::stargazer(type = "latex")
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = NA"),
levels = 1:2),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = ifelse(phq9>=10,1,0)) %>%
filter(muestra==1,!is.na(salida),ola==6,!is.na(sit_laboral))
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo + depr,data=data)
reg %>% stargazer::stargazer(type = "latex")
reg = lm(salida ~ sit_laboral + m0_edad + m0_sexo,data=data)
reg %>% stargazer::stargazer(type = "latex")
reg = lm(salida ~ sit_laboral:m0_edad + m0_sexo,data=data)
reg %>% stargazer::stargazer(type = "latex")
reg %>% summary()
reg %>% stargazer::stargazer(type = "latex")
reg = lm(salida ~ sit_laboral + m0_edad  + m0_sexo + sit_laboral:m0_sexo,data=data)
reg %>% summary()
reg %>% stargazer::stargazer(type = "latex")
data = elsoc_long_2016_2022 %>%
purrr::map_at(.at = vars(starts_with('s11_0')),
.f = function(s) car::recode(s, "1 = 0; 2 = 1; 3 = 2; c(4, 5) = 3; c(-888, -999) = NA")) %>%
as.data.frame() %>%
mutate(salida = factor(car::recode(salida, "1 = 1; 2 = 2; 3:5 = NA"),
levels = 1:2),
sit_laboral = factor(car::recode(m02, "1:3 = 1; 6 = 2; c(4,5,7,8,9) = 3"),
levels = 1:3),
phq9 = (s11_01 + s11_02 + s11_03 + s11_04 + s11_05 + s11_06 + s11_07 + s11_08 + s11_09),
depr = ifelse(phq9>=10,1,0)) %>%
filter(muestra==1,!is.na(salida),ola==6,!is.na(sit_laboral),!is.na(c15))
reg = lm(salida ~ sit_laboral + m0_edad  + m0_sexo + sit_laboral:m0_sexo + c15,data=data)
reg = lm(salida ~ sit_laboral + m0_edad  + m0_sexo + sit_laboral:m0_sexo + c15,data=data)
reg %>% summary()
reg %>% stargazer::stargazer(type = "latex")
data$sit_laboral %>% typeof()
data$sit_laboral = data$sit_laboral %>% as.double()
reg = lm(salida ~ sit_laboral + m0_edad  + m0_sexo + sit_laboral:m0_sexo + c15,data=data)
reg %>% summary()
data$salida = data$salida %>% as.double()
reg = lm(salida ~ sit_laboral + m0_edad  + m0_sexo + sit_laboral:m0_sexo + c15,data=data)
reg %>% summary()
reg = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + sit_laboral:m0_sexo + c15,data=data)
reg %>% summary()
reg = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + factor(sit_laboral):m0_sexo + c15,data=data)
reg %>% summary()
reg = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + factor(sit_laboral):m0_sexo + c15,data=data,
weights = ponderador02)
reg %>% summary()
options(scipen=999)
reg %>% stargazer::stargazer(type = "latex")
reg %>% summary()
reg = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + c15,data=data,
weights = ponderador02)
reg %>% summary()
write.table(reg, file = "docs/aoi/reg.txt", sep = ",", quote = FALSE, row.names = F)
reg
reg$coefficients
reg %>% as.data.frame()
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02)
m2 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo ,data=data,
weights = ponderador02)
m3 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + factor(sit_laboral):m0_sexo ,data=data,
weights = ponderador02)
m = rbind_list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
?rbind_list
m = dplyr::rbind_list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
m = dplyr::rbind_all(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
list
m = dplyr::rbind_list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02) %>% tidy()
library(tidyverse)
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02) %>% tidy()
library(tidyr)
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02) %>% tidy()
library(broom)
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02) %>% tidy()
m2 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo ,data=data,
weights = ponderador02) %>% tidy()
m3 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + factor(sit_laboral):m0_sexo ,data=data,
weights = ponderador02) %>% tidy()
m = dplyr::rbind_list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
m = rbind_list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
m = rbindlist(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
library(data.table)
m1 = lm(salida ~ factor(sit_laboral) ,data=data,
weights = ponderador02) %>% tidy()
m2 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo ,data=data,
weights = ponderador02) %>% tidy()
m3 = lm(salida ~ factor(sit_laboral) + m0_edad  + m0_sexo + factor(sit_laboral):m0_sexo ,data=data,
weights = ponderador02) %>% tidy()
m = rbindlist(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3))
m = rbindlist(list(m1 %>% mutate(model=1),
m2 %>% mutate(model=2),
m3 %>% mutate(model=3)))
ols_table <- m %>%
select(-statistic, -p.value) %>%
mutate_each(funs(round(., 2)), -term) %>%
gather(key, value, estimate:std.error) %>%
spread(model, value)
write.table(ols_table, file = "docs/aoi/reg.txt", sep = ",", quote = FALSE, row.names = F)
View(ols_table)
m1 %>% summary()
ols_table <- m %>%
select(-statistic) %>%
mutate_each(funs(round(., 2)), -term) %>%
gather(key, value, estimate:std.error) %>%
spread(model, value)
ols_table <- m %>%
select(-statistic) %>%
mutate_each(funs(round(., 2)), -term) %>%
gather(key, value, estimate:std.error:p.value) %>%
spread(model, value)
write.table(ols_table, file = "docs/aoi/reg.txt", sep = ",", quote = FALSE, row.names = F)
write.table(ols_table, file = "docs/aoi/reg.txt", sep = ",")
getwd()
write.table(ols_table, file = "reg.txt", sep = ",")
